<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }}</title>
  <meta name="description" content="{{ page.description | default: site.description }}" />

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Oswald:wght@400;500;600&display=swap" rel="stylesheet" />

  <link rel="stylesheet" href="{{ '/assets/css/styles.css' | relative_url }}">
</head>
<body>
      <div class="top-bar">
      <div class="container top-bar-inner">
    
        <div class="top-bar-left">
          <span class="top-bar-item">
            üìû <a href="tel:{{ site.data.client.phone }}">{{ site.data.client.phone }}</a>
          </span>
          <span class="top-bar-separator">‚Ä¢</span>
          <span class="top-bar-item">
            ‚úâÔ∏è <a href="mailto:{{ site.data.client.email }}">{{ site.data.client.email }}</a>
          </span>
        </div>
    
        <div class="top-bar-right">
          {% if site.data.client.social.facebook %}
          <a href="{{ site.data.client.social.facebook }}" class="social-icon" target="_blank" aria-label="Facebook">
            <img src="{{ '/assets/images/facebook.svg' | relative_url }}" alt="Facebook">
          </a>
          {% endif %}
    
          {% if site.data.client.social.instagram %}
          <a href="{{ site.data.client.social.instagram }}" class="social-icon" target="_blank" aria-label="Instagram">
            <img src="{{ '/assets/images/instagram.svg' | relative_url }}" alt="Instagram">
          </a>
          {% endif %}
        </div>
    
      </div>
    </div>
  <header class="site-header">
    <div class="container nav-container">
      <a href="{{ '/' | relative_url }}" class="logo">Castaway<span> Guide Service</span></a>

      <button class="nav-toggle" aria-label="Toggle navigation">
        <span class="nav-toggle-line"></span>
        <span class="nav-toggle-line"></span>
      </button>

      <nav class="site-nav">
        <a href="{{ '/#about' | relative_url }}">About</a>
        <a href="{{ '/#trips' | relative_url }}">Trips</a>
        <a href="{{ '/#river' | relative_url }}">The Brule</a>
        <a href="{{ '/#gallery' | relative_url }}">Gallery</a>
        <a href="{{ '/blog' | relative_url }}">River Reports</a>
        <a href="{{ '/#booking' | relative_url }}" class="btn btn-primary">Book Now</a>
      </nav>
    </div>
  </header>

  <main>
    {{ content }}
  </main>

  <footer class="site-footer">
    <div class="container footer-inner">
      <p>&copy; <span id="year"></span> {{ site.title }}. All rights reserved.</p>
      <p class="footer-meta">Licensed Wisconsin Fly Fishing Guide ‚Ä¢ Brule River, WI</p>
    </div>
  </footer>

  <script src="{{ '/assets/js/script.js' | relative_url }}"></script>

  <script>
  document.addEventListener('DOMContentLoaded', function () {
    const monthLabel = document.querySelector('.calendar-month');
    const dateInput  = document.querySelector('#date');
    const days       = document.querySelectorAll('.calendar-day.is-available');

    if (!monthLabel || !dateInput || !days.length) return;

    days.forEach(function (day) {
      day.addEventListener('click', function () {
        // Clear previous selection
        days.forEach(function (d) {
          d.classList.remove('is-selected');
        });

        // Mark this one selected
        day.classList.add('is-selected');

        // Build a date from the month label + day number
        const monthText = monthLabel.textContent.trim(); // e.g., "November 2025"
        const dayNumber = day.dataset.day || day.textContent.trim();
        const dateString = monthText + ' ' + dayNumber; // "November 2025 29"
        const parsedDate = new Date(dateString);

        if (!isNaN(parsedDate.getTime())) {
          const yyyy = parsedDate.getFullYear();
          const mm   = String(parsedDate.getMonth() + 1).padStart(2, '0');
          const dd   = String(parsedDate.getDate()).padStart(2, '0');
          dateInput.value = `${yyyy}-${mm}-${dd}`;
        }
      });
    });
  });
</script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const calendarEl = document.getElementById('booking-calendar');
    const monthLabel = document.getElementById('calendar-month-label');
    const prevBtn = document.querySelector('.calendar-nav-prev');
    const nextBtn = document.querySelector('.calendar-nav-next');
    const dateInput = document.getElementById('date');

    if (!calendarEl || !monthLabel) return;

    // ---- CONFIG: availability map ----
    // Keys are ISO dates (YYYY-MM-DD). Values: "available" | "limited" | "booked"
    const availability = {
      // January 2026
      '2026-01-01': 'available',
      '2026-01-02': 'available',
      '2026-01-03': 'booked',
      '2026-01-05': 'limited',
      '2026-01-12': 'limited',
      '2026-01-19': 'limited',
      '2026-01-26': 'limited',
      '2026-01-13': 'available',
      '2026-01-14': 'available',
      '2026-01-15': 'available',
      '2026-01-16': 'available',
      '2026-01-20': 'available',
      '2026-01-21': 'available',
      '2026-01-22': 'available',
      '2026-01-23': 'available',
      '2026-01-27': 'available',
      '2026-01-28': 'available',
      '2026-01-29': 'available',
      '2026-01-30': 'available',
      '2026-01-31': 'available',

      // Example: February 2026 ‚Äì all available except weekends
      // Add/remove as you like:
      '2026-02-01': 'booked',
      '2026-02-02': 'booked'
      // etc...
    };

    // start on January 2026 to match your mock
    let currentYear = 2026;
    let currentMonth = 0; // 0 = January, 11 = December

    function formatMonthLabel(year, monthIndex) {
      const dt = new Date(year, monthIndex, 1);
      return dt.toLocaleDateString(undefined, { month: 'long', year: 'numeric' });
    }

    function isoDate(year, monthIndex, day) {
      const mm = String(monthIndex + 1).padStart(2, '0');
      const dd = String(day).padStart(2, '0');
      return year + '-' + mm + '-' + dd;
    }

    function renderCalendar(year, monthIndex) {
      calendarEl.innerHTML = '';

      const firstDay = new Date(year, monthIndex, 1);
      const startWeekday = firstDay.getDay(); // 0‚Äì6, Sun‚ÄìSat
      const daysInMonth = new Date(year, monthIndex + 1, 0).getDate();

      monthLabel.textContent = formatMonthLabel(year, monthIndex);

      // Weekday header
      const weekdays = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
      weekdays.forEach(function (wd) {
        const span = document.createElement('span');
        span.className = 'calendar-weekday';
        span.textContent = wd;
        calendarEl.appendChild(span);
      });

      // Padding before day 1
      for (let i = 0; i < startWeekday; i++) {
        const pad = document.createElement('button');
        pad.type = 'button';
        pad.className = 'calendar-day is-empty';
        pad.disabled = true;
        calendarEl.appendChild(pad);
      }

      // Days
      for (let day = 1; day <= daysInMonth; day++) {
        const dateStr = isoDate(year, monthIndex, day);
        const status = availability[dateStr] || null;

        const btn = document.createElement('button');
        btn.type = 'button';
        btn.textContent = day;
        btn.dataset.date = dateStr;
        btn.classList.add('calendar-day');

        if (status === 'available') {
          btn.classList.add('is-available');
        } else if (status === 'limited') {
          btn.classList.add('is-limited');
        } else if (status === 'booked') {
          btn.classList.add('is-booked');
          btn.disabled = true;
        } else {
          // No entry => treat as not bookable / muted
          btn.classList.add('is-muted');
          btn.disabled = true;
        }

        btn.addEventListener('click', function () {
          if (btn.disabled) return;

          // Clear previous selection
          calendarEl
            .querySelectorAll('.calendar-day.is-selected')
            .forEach(function (el) {
              el.classList.remove('is-selected');
            });

          btn.classList.add('is-selected');

          // Push into <input type="date">
          if (dateInput) {
            dateInput.value = dateStr;
          }
        });

        calendarEl.appendChild(btn);
      }
    }

    // Nav buttons
    prevBtn.addEventListener('click', function () {
      currentMonth -= 1;
      if (currentMonth < 0) {
        currentMonth = 11;
        currentYear -= 1;
      }
      renderCalendar(currentYear, currentMonth);
    });

    nextBtn.addEventListener('click', function () {
      currentMonth += 1;
      if (currentMonth > 11) {
        currentMonth = 0;
        currentYear += 1;
      }
      renderCalendar(currentYear, currentMonth);
    });

    // Initial render
    renderCalendar(currentYear, currentMonth);
  });
</script>

  <script>
  document.addEventListener('DOMContentLoaded', function () {
    const form = document.getElementById('booking-form');
    const success = document.getElementById('booking-success');
    const resetBtn = document.getElementById('booking-reset');

    if (!form || !success || !resetBtn) return;

    form.addEventListener('submit', function (e) {
      e.preventDefault();

      // You could hook up a real email service / backend here.
      // For now we just show the success state.
      form.style.display = 'none';
      success.style.display = 'block';

      // Optionally scroll to top of card
      success.scrollIntoView({ behavior: 'smooth', block: 'start' });
    });

    resetBtn.addEventListener('click', function () {
      // Reset form fields
      form.reset();
      // Swap views back
      success.style.display = 'none';
      form.style.display = 'block';
    });
  });
</script>
</body>
</html>
